{"ast":null,"code":"var _jsxFileName = \"/Users/lucassjostrommacbook/collected-calendar-build/src/components/DataCollection/ReqUsers.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React from \"react\";\nimport { useMsal } from \"@azure/msal-react\";\nimport { loginRequest } from '../../AuthenticationFolder/authConfig';\nimport Button from \"react-bootstrap/Button\";\nimport { callForUser, callForEvent } from \"./GraphCalls\";\nimport RenderMeeting from \"../RenderComponents/RenderMeeting\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction handleLogin(instance) {\n  //Handles login and catches exceptions\n  instance.loginRedirect(loginRequest).catch(e => {\n    console.error(e);\n  });\n}\n\nexport const getEvent = (data, instance, accounts) => {\n  const request = { ...loginRequest,\n    account: accounts[0]\n  };\n  var datamap = data.map(user => {\n    instance.acquireTokenSilent(request).then(res => {\n      callForEvent(res.accessToken, user.userPrincipalName, user.accountEnabled).then(res => {\n        if (res.value === undefined || res === false) {} else {\n          return {\n            key: user.id,\n            name: user.displayName,\n            mail: user.userPrincipalName\n          };\n          console.log(user.displayName + \" # \" + user.userPrincipalName + \" | \" + (res === null || res === void 0 ? void 0 : res.value[0].subject) + \" _ \" + (res === null || res === void 0 ? void 0 : res.value[1].subject));\n          console.log(res.value[0]);\n        }\n      });\n    });\n  });\n  console.log(datamap);\n};\nexport function GetUsers() {\n  _s();\n\n  const {\n    instance,\n    accounts\n  } = useMsal();\n  CallUser();\n\n  function CallUser() {\n    const request = { ...loginRequest,\n      account: accounts[0]\n    };\n    instance.acquireTokenSilent(request).then(res => {\n      callForUser(res.accessToken).then(res => {\n        getEvent(res.value, instance, accounts);\n      });\n    }).catch(e => {\n      instance.acquireTokenPopup(request).then(res => {\n        callForUser(res.accessToken).then(res => {\n          getEvent(res.value);\n        });\n      });\n    });\n  }\n}\n\n_s(GetUsers, \"dXjh19YPAR1C3Q3VfJSLpkBSILY=\", false, function () {\n  return [useMsal];\n});\n\n_c = GetUsers;\nexport const ReqUsers = () => {\n  _s2();\n\n  //Bruger Msal (Microsfot Authentication Library.)\n  const {\n    instance\n  } = useMsal();\n  return (\n    /*#__PURE__*/\n    //Button class imported from react-boostrap\n    _jsxDEV(Button, {\n      className: \"ml-auto\",\n      onClick: () => handleLogin(instance),\n      children: \"Sign in using Redirect\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this)\n  );\n};\n\n_s2(ReqUsers, \"kNmaupTUyOO55c/HFAYpHUXUX7Y=\", false, function () {\n  return [useMsal];\n});\n\n_c2 = ReqUsers;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"GetUsers\");\n$RefreshReg$(_c2, \"ReqUsers\");","map":{"version":3,"names":["React","useMsal","loginRequest","Button","callForUser","callForEvent","RenderMeeting","handleLogin","instance","loginRedirect","catch","e","console","error","getEvent","data","accounts","request","account","datamap","map","user","acquireTokenSilent","then","res","accessToken","userPrincipalName","accountEnabled","value","undefined","key","id","name","displayName","mail","log","subject","GetUsers","CallUser","acquireTokenPopup","ReqUsers"],"sources":["/Users/lucassjostrommacbook/collected-calendar-build/src/components/DataCollection/ReqUsers.jsx"],"sourcesContent":["import React from \"react\";\nimport { useMsal } from \"@azure/msal-react\";\nimport { loginRequest } from '../../AuthenticationFolder/authConfig'\nimport Button from \"react-bootstrap/Button\"\nimport { callForUser, callForEvent } from \"./GraphCalls\"\nimport RenderMeeting from \"../RenderComponents/RenderMeeting\";\n\nfunction handleLogin(instance) {\n    //Handles login and catches exceptions\n    instance.loginRedirect(loginRequest).catch(e => {\n        console.error(e);\n    });\n}\n\nexport const getEvent = (data, instance, accounts) => {\n    const request = {\n        ...loginRequest,\n        account: accounts[0]\n    };  \n\n   var datamap = data.map((user) => {\n        instance.acquireTokenSilent(request).then((res) => {\n                callForEvent(res.accessToken, user.userPrincipalName, user.accountEnabled).then((res) => {\n                    if(res.value === undefined || res === false){\n                    } else{\n                        return {key:user.id, name:user.displayName, mail: user.userPrincipalName}\n                        console.log(user.displayName + \" # \" + user.userPrincipalName + \" | \" + res?.value[0].subject + \" _ \" + res?.value[1].subject)\n                        console.log(res.value[0])\n                    }\n                })\n            })\n        })\n        console.log(datamap)\n    }\n\nexport function GetUsers(){\n    const { instance, accounts } = useMsal();\n    CallUser();\n    function CallUser(){\n        const request = {\n            ...loginRequest,\n            account: accounts[0]\n        };\n    \n        instance.acquireTokenSilent(request).then((res) => {\n            callForUser(res.accessToken).then((res) => {\n                getEvent(res.value, instance, accounts)\n            })\n        }).catch((e) =>{\n        instance.acquireTokenPopup(request).then((res) => {\n            callForUser(res.accessToken).then((res) => {\n                getEvent(res.value);\n            })\n        })\n        })\n    }\n}\n\nexport const ReqUsers = () => {\n    //Bruger Msal (Microsfot Authentication Library.)\n    const { instance } = useMsal();\n    return (\n        //Button class imported from react-boostrap\n        <Button className=\"ml-auto\" onClick={() => handleLogin(instance)}>Sign in using Redirect</Button>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}